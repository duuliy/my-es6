<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>set 和 map 数据结构</title>
    <style>
    </style>
</head>

<body>

</body>
<script>
    //iterable 接口  ES6标准引入了新的iterable类型，Array、Map和Set都属于iterable类型。

    /*--------------1.Set 数据结构-------------------*/
    //set 数据结构  Set 本身是一个构造函数，用来生成 Set 数据结构。
    const set = new Set()
    const arr = [1, 2, 3, 4, 5, 6, 1, 2, 3]
    arr.forEach((x) => set.add(x))
    console.log(set); //size:6,   1 2 3 4 5 6
    for (let i of set) {
        console.log(i);
    }
    // 2 3 5 4

    const _arr = [...set]
    console.log(arr, arr.length);

    set.add('asd', "asd") //只能添加一个
    console.log(set.has('asd'));

    [...new Set(arr)]


    for (let a of set.values()) {
        console.log(a);
    }


    /*--------------2.WeakSet  -------------------*/
    //WeakSet 构造函数 1.只能接受 对象为参数 2.WeakSet 中的对象都是弱引用，即垃圾回收机制不考虑 WeakSet 对该对象的引用 3.WeakSet 不可遍历。

    const wss = new WeakSet();
    // wss.add(1)
    // TypeError: Invalid value used in weak set
    // wss.add(Symbol())
    // TypeError: invalid value used in weak set


    const ws = new WeakSet([
        [1, 2],
        [3, 4]
    ]) //基本上用不到
    console.log(ws);


    /*--------------3.Map 数据结构-------------------*/
    //Map 可以将对象 作为key值！！！！！
    const o = {}
    const node = document.createElement('div')
    o[node] = 'test'
    console.log(o); //[object HTMLDivElement] :"test"
    const m = new Map()
    m.set(node, 'test') //设置
    m.has(node) // true
    console.log(m.get(node)); //取到 test

    let sss = 'ppp';
    o[sss] = 666; //这样写，变量也可以作为属性 iterable的Map类型
    console.log(o)

    function strMapToJson(strMap) {
        return JSON.stringify(strMapToObj(strMap));
    }

    let myMap = new Map().set('yes', true).set('no', false);  //也可链式调用
    strMapToJson(myMap)

    /*--------------2.WeakMap  -------------------*/
    //同set map  用法  可测试是否被拷贝
</script>

</html>